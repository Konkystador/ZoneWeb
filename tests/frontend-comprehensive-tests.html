<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ - –û–∫–æ–Ω–Ω—ã–µ –ú–∞—Å—Ç–µ—Ä–∞</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="../public/css/style.css" rel="stylesheet">
    <style>
        .test-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        .test-item {
            margin: 15px 0;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid;
        }
        
        .test-item.passed {
            background-color: #d4edda;
            border-left-color: #28a745;
            color: #155724;
        }
        
        .test-item.failed {
            background-color: #f8d7da;
            border-left-color: #dc3545;
            color: #721c24;
        }
        
        .test-item.warning {
            background-color: #fff3cd;
            border-left-color: #ffc107;
            color: #856404;
        }
        
        .test-item.info {
            background-color: #d1ecf1;
            border-left-color: #17a2b8;
            color: #0c5460;
        }
        
        .test-controls {
            margin: 20px 0;
            text-align: center;
        }
        
        .btn-test {
            margin: 5px;
            padding: 10px 20px;
        }
        
        .test-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            color: white;
        }
        
        .stat-card.passed { background: #28a745; }
        .stat-card.failed { background: #dc3545; }
        .stat-card.warning { background: #ffc107; color: #212529; }
        .stat-card.info { background: #17a2b8; }
        
        .progress-bar {
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="text-center mb-4">
            <h1><i class="fas fa-vial"></i> –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞</h1>
            <p class="lead">–ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</p>
        </div>
        
        <div class="test-controls">
            <button class="btn btn-primary btn-test" onclick="runAllTests()">
                <i class="fas fa-play"></i> –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
            </button>
            <button class="btn btn-secondary btn-test" onclick="clearResults()">
                <i class="fas fa-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            </button>
            <button class="btn btn-info btn-test" onclick="runSpecificTest('auth')">
                <i class="fas fa-key"></i> –¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            </button>
            <button class="btn btn-info btn-test" onclick="runSpecificTest('ui')">
                <i class="fas fa-desktop"></i> –¢–µ—Å—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            </button>
            <button class="btn btn-info btn-test" onclick="runSpecificTest('performance')">
                <i class="fas fa-tachometer-alt"></i> –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            </button>
        </div>
        
        <div class="test-stats" id="test-stats"></div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
        </div>
        
        <div id="test-results"></div>
    </div>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <script src="../public/js/app-simple.js"></script>
    
    <script>
        let testResults = [];
        let currentTest = 0;
        let totalTests = 0;
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function logTest(testName, passed, message = '', type = 'info', section = 'general') {
            const result = {
                name: testName,
                passed: passed,
                message: message,
                type: type,
                section: section,
                timestamp: new Date().toISOString()
            };
            testResults.push(result);
            
            const status = passed ? '‚úÖ' : '‚ùå';
            const warning = type === 'warning' ? '‚ö†Ô∏è' : '';
            const info = type === 'info' ? '‚ÑπÔ∏è' : '';
            console.log(`${status} ${warning} ${info} [${section}] ${testName}: ${message}`);
            
            updateTestUI(result);
            updateProgress();
        }
        
        function updateTestUI(result) {
            const testContainer = document.getElementById('test-results');
            if (!testContainer) return;
            
            // –ù–∞—Ö–æ–¥–∏–º –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º —Å–µ–∫—Ü–∏—é
            let sectionDiv = document.getElementById(`section-${result.section}`);
            if (!sectionDiv) {
                sectionDiv = document.createElement('div');
                sectionDiv.id = `section-${result.section}`;
                sectionDiv.className = 'test-section';
                sectionDiv.innerHTML = `<h3>${getSectionTitle(result.section)}</h3>`;
                testContainer.appendChild(sectionDiv);
            }
            
            const testDiv = document.createElement('div');
            testDiv.className = `test-item ${result.passed ? 'passed' : result.type === 'warning' ? 'warning' : 'failed'}`;
            testDiv.innerHTML = `
                <div class="test-name"><strong>${result.name}</strong></div>
                <div class="test-message">${result.message}</div>
                <div class="test-time">${new Date(result.timestamp).toLocaleTimeString()}</div>
            `;
            
            sectionDiv.appendChild(testDiv);
        }
        
        function getSectionTitle(section) {
            const titles = {
                'auth': 'üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å',
                'ui': 'üé® –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å',
                'performance': '‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å',
                'api': 'üì° API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è',
                'mobile': 'üì± –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å',
                'forms': 'üìù –§–æ—Ä–º—ã –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è',
                'navigation': 'üß≠ –ù–∞–≤–∏–≥–∞—Ü–∏—è',
                'data': 'üíæ –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏'
            };
            return titles[section] || 'üîß –û–±—â–∏–µ —Ç–µ—Å—Ç—ã';
        }
        
        function updateProgress() {
            const passed = testResults.filter(r => r.passed).length;
            const total = testResults.length;
            const percentage = total > 0 ? Math.round((passed / total) * 100) : 0;
            
            document.getElementById('progress-fill').style.width = `${percentage}%`;
            
            updateStats();
        }
        
        function updateStats() {
            const passed = testResults.filter(r => r.passed).length;
            const failed = testResults.filter(r => !r.passed && r.type !== 'warning').length;
            const warnings = testResults.filter(r => r.type === 'warning').length;
            const total = testResults.length;
            
            const statsDiv = document.getElementById('test-stats');
            statsDiv.innerHTML = `
                <div class="stat-card passed">
                    <h4>${passed}</h4>
                    <p>–ü—Ä–æ–π–¥–µ–Ω–æ</p>
                </div>
                <div class="stat-card failed">
                    <h4>${failed}</h4>
                    <p>–ü—Ä–æ–≤–∞–ª–µ–Ω–æ</p>
                </div>
                <div class="stat-card warning">
                    <h4>${warnings}</h4>
                    <p>–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è</p>
                </div>
                <div class="stat-card info">
                    <h4>${total}</h4>
                    <p>–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤</p>
                </div>
            `;
        }
        
        // ==================== –¢–ï–°–¢–´ –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò ====================
        
        async function testAuthentication() {
            logTest('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è', window.app !== undefined, '–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ', 'info', 'auth');
            
            if (!window.app) {
                logTest('–ö–ª–∞—Å—Å WindowRepairApp', false, '–ö–ª–∞—Å—Å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω', 'failed', 'auth');
                return false;
            }
            
            logTest('–ö–ª–∞—Å—Å WindowRepairApp', true, '–ö–ª–∞—Å—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'passed', 'auth');
            
            // –¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            try {
                const response = await fetch('/api/auth/check');
                const data = await response.json();
                
                if (data.success) {
                    logTest('–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏', true, '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω', 'passed', 'auth');
                } else {
                    logTest('–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏', true, '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω (–æ–∂–∏–¥–∞–µ–º–æ)', 'info', 'auth');
                }
            } catch (error) {
                logTest('–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏', false, '–û—à–∏–±–∫–∞: ' + error.message, 'failed', 'auth');
            }
            
            return true;
        }
        
        // ==================== –¢–ï–°–¢–´ –ò–ù–¢–ï–†–§–ï–ô–°–ê ====================
        
        function testUserInterface() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            const requiredElements = [
                'loginScreen',
                'mainApp',
                'dashboardPage',
                'ordersPage',
                'newOrderModal',
                'orderCardsContainer'
            ];
            
            let foundElements = 0;
            for (const elementId of requiredElements) {
                const element = document.getElementById(elementId);
                if (element) {
                    foundElements++;
                }
            }
            
            logTest('–û—Å–Ω–æ–≤–Ω—ã–µ DOM —ç–ª–µ–º–µ–Ω—Ç—ã', foundElements === requiredElements.length, 
                `–ù–∞–π–¥–µ–Ω–æ ${foundElements}/${requiredElements.length} —ç–ª–µ–º–µ–Ω—Ç–æ–≤`, 
                foundElements === requiredElements.length ? 'passed' : 'failed', 'ui');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ CSS –∫–ª–∞—Å—Å–æ–≤
            const requiredClasses = [
                'btn-3d',
                'burger-menu-3d',
                'burger-dropdown-3d',
                'btn-group-3d',
                'order-card'
            ];
            
            let foundClasses = 0;
            for (const className of requiredClasses) {
                const elements = document.getElementsByClassName(className);
                if (elements.length > 0) {
                    foundClasses++;
                }
            }
            
            logTest('CSS –∫–ª–∞—Å—Å—ã', foundClasses > 0, `–ù–∞–π–¥–µ–Ω–æ ${foundClasses}/${requiredClasses.length} –∫–ª–∞—Å—Å–æ–≤`, 
                foundClasses > 0 ? 'passed' : 'warning', 'ui');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            const modals = [
                'newOrderModal',
                'editOrderModal',
                'newUserModal',
                'hierarchyModal'
            ];
            
            let foundModals = 0;
            for (const modalId of modals) {
                const modal = document.getElementById(modalId);
                if (modal && modal.classList.contains('modal')) {
                    foundModals++;
                }
            }
            
            logTest('–ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞', foundModals === modals.length, 
                `–ù–∞–π–¥–µ–Ω–æ ${foundModals}/${modals.length} –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω`, 
                foundModals === modals.length ? 'passed' : 'warning', 'ui');
            
            return true;
        }
        
        // ==================== –¢–ï–°–¢–´ –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò ====================
        
        function testPerformance() {
            const startTime = performance.now();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥—Ä—É–∑–∫–∏
            const loadTime = performance.now() - startTime;
            
            logTest('–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏', loadTime < 1000, 
                `–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞ ${loadTime.toFixed(2)}ms`, 
                loadTime < 1000 ? 'passed' : 'warning', 'performance');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ DOM
            const domSize = document.querySelectorAll('*').length;
            logTest('–†–∞–∑–º–µ—Ä DOM', domSize < 1000, 
                `${domSize} —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ DOM`, 
                domSize < 1000 ? 'passed' : 'warning', 'performance');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤
            const scripts = document.getElementsByTagName('script');
            logTest('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∫—Ä–∏–ø—Ç–æ–≤', scripts.length < 20, 
                `${scripts.length} —Å–∫—Ä–∏–ø—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω–æ`, 
                scripts.length < 20 ? 'passed' : 'warning', 'performance');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç–∏–ª–µ–π
            const styles = document.getElementsByTagName('link');
            logTest('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∏–ª–µ–π', styles.length < 10, 
                `${styles.length} —Å—Ç–∏–ª–µ–π –∑–∞–≥—Ä—É–∂–µ–Ω–æ`, 
                styles.length < 10 ? 'passed' : 'warning', 'performance');
            
            return true;
        }
        
        // ==================== –¢–ï–°–¢–´ API –ò–ù–¢–ï–ì–†–ê–¶–ò–ò ====================
        
        async function testAPIIntegration() {
            try {
                // –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
                const response = await fetch('/api/auth/check');
                logTest('API –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å', response.ok, 
                    `–°—Ç–∞—Ç—É—Å: ${response.status}`, 
                    response.ok ? 'passed' : 'warning', 'api');
                
                // –¢–µ—Å—Ç CORS
                logTest('CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏', true, 'CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'info', 'api');
                
                // –¢–µ—Å—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ API
                const apiStartTime = performance.now();
                await fetch('/api/auth/check');
                const apiEndTime = performance.now();
                const apiResponseTime = apiEndTime - apiStartTime;
                
                logTest('–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API', apiResponseTime < 1000, 
                    `API –æ—Ç–≤–µ—Ç–∏–ª –∑–∞ ${apiResponseTime.toFixed(2)}ms`, 
                    apiResponseTime < 1000 ? 'passed' : 'warning', 'api');
                
            } catch (error) {
                logTest('API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è', false, '–û—à–∏–±–∫–∞: ' + error.message, 'failed', 'api');
            }
            
            return true;
        }
        
        // ==================== –¢–ï–°–¢–´ –ú–û–ë–ò–õ–¨–ù–û–ô –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–ò ====================
        
        function testMobileResponsiveness() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ viewport meta tag
            const viewportMeta = document.querySelector('meta[name="viewport"]');
            const hasViewport = viewportMeta && 
                viewportMeta.content.includes('width=device-width') && 
                viewportMeta.content.includes('initial-scale=1');
            
            logTest('Viewport meta tag', hasViewport, 
                hasViewport ? 'Viewport –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ' : 'Viewport –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω', 
                hasViewport ? 'passed' : 'failed', 'mobile');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å–æ–≤
            const styleSheets = document.styleSheets;
            let hasMediaQueries = false;
            let mediaQueryCount = 0;
            
            for (let i = 0; i < styleSheets.length; i++) {
                try {
                    const rules = styleSheets[i].cssRules || styleSheets[i].rules;
                    for (let j = 0; j < rules.length; j++) {
                        if (rules[j].type === CSSRule.MEDIA_RULE) {
                            hasMediaQueries = true;
                            mediaQueryCount++;
                        }
                    }
                } catch (e) {
                    // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ CORS
                }
            }
            
            logTest('CSS –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã', hasMediaQueries, 
                `–ù–∞–π–¥–µ–Ω–æ ${mediaQueryCount} –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å–æ–≤`, 
                hasMediaQueries ? 'passed' : 'warning', 'mobile');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ Bootstrap
            const responsiveClasses = document.querySelectorAll('[class*="col-"], [class*="d-"], [class*="d-md"], [class*="d-lg"]');
            logTest('Bootstrap responsive –∫–ª–∞—Å—Å—ã', responsiveClasses.length > 0, 
                `–ù–∞–π–¥–µ–Ω–æ ${responsiveClasses.length} responsive –∫–ª–∞—Å—Å–æ–≤`, 
                responsiveClasses.length > 0 ? 'passed' : 'warning', 'mobile');
            
            return true;
        }
        
        // ==================== –¢–ï–°–¢–´ –§–û–†–ú ====================
        
        function testForms() {
            const forms = document.querySelectorAll('form');
            logTest('–ù–∞–ª–∏—á–∏–µ —Ñ–æ—Ä–º', forms.length > 0, 
                `–ù–∞–π–¥–µ–Ω–æ ${forms.length} —Ñ–æ—Ä–º`, 
                forms.length > 0 ? 'passed' : 'warning', 'forms');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
            const requiredFields = document.querySelectorAll('input[required], select[required], textarea[required]');
            logTest('–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', requiredFields.length > 0, 
                `–ù–∞–π–¥–µ–Ω–æ ${requiredFields.length} –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π`, 
                requiredFields.length > 0 ? 'passed' : 'info', 'forms');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –ø–æ–ª–µ–π
            const emailFields = document.querySelectorAll('input[type="email"]');
            const phoneFields = document.querySelectorAll('input[type="tel"]');
            const dateFields = document.querySelectorAll('input[type="date"]');
            
            logTest('–¢–∏–ø—ã –ø–æ–ª–µ–π', emailFields.length > 0 || phoneFields.length > 0 || dateFields.length > 0, 
                `Email: ${emailFields.length}, –¢–µ–ª–µ—Ñ–æ–Ω: ${phoneFields.length}, –î–∞—Ç–∞: ${dateFields.length}`, 
                'info', 'forms');
            
            return true;
        }
        
        // ==================== –¢–ï–°–¢–´ –ù–ê–í–ò–ì–ê–¶–ò–ò ====================
        
        function testNavigation() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            const navElements = document.querySelectorAll('nav, .navbar, .nav, .burger-menu-3d');
            logTest('–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã', navElements.length > 0, 
                `–ù–∞–π–¥–µ–Ω–æ ${navElements.length} –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤`, 
                navElements.length > 0 ? 'passed' : 'warning', 'navigation');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Å—ã–ª–æ–∫
            const links = document.querySelectorAll('a[href]');
            logTest('–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏', links.length > 0, 
                `–ù–∞–π–¥–µ–Ω–æ ${links.length} —Å—Å—ã–ª–æ–∫`, 
                links.length > 0 ? 'passed' : 'info', 'navigation');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–æ–ø–æ–∫
            const buttons = document.querySelectorAll('button, .btn');
            logTest('–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏', buttons.length > 0, 
                `–ù–∞–π–¥–µ–Ω–æ ${buttons.length} –∫–Ω–æ–ø–æ–∫`, 
                buttons.length > 0 ? 'passed' : 'warning', 'navigation');
            
            return true;
        }
        
        // ==================== –¢–ï–°–¢–´ –†–ê–ë–û–¢–´ –° –î–ê–ù–ù–´–ú–ò ====================
        
        function testDataHandling() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
            const hasApp = typeof window.app !== 'undefined';
            const hasCurrentUser = typeof currentUser !== 'undefined';
            const hasOrders = typeof orders !== 'undefined';
            
            logTest('–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ', hasApp && hasCurrentUser && hasOrders, 
                `App: ${hasApp}, User: ${hasCurrentUser}, Orders: ${hasOrders}`, 
                hasApp && hasCurrentUser && hasOrders ? 'passed' : 'warning', 'data');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
            const dataFunctions = [
                'loadOrders',
                'showOrderCards',
                'createOrderCardHtml',
                'loadDashboard'
            ];
            
            let foundFunctions = 0;
            for (const funcName of dataFunctions) {
                if (typeof window[funcName] === 'function') {
                    foundFunctions++;
                }
            }
            
            logTest('–§—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏', foundFunctions === dataFunctions.length, 
                `–ù–∞–π–¥–µ–Ω–æ ${foundFunctions}/${dataFunctions.length} —Ñ—É–Ω–∫—Ü–∏–π`, 
                foundFunctions === dataFunctions.length ? 'passed' : 'warning', 'data');
            
            return true;
        }
        
        // ==================== –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        
        async function runAllTests() {
            clearResults();
            console.log('üöÄ –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤...\n');
            
            const testSections = [
                { name: '–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è', func: testAuthentication },
                { name: '–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å', func: testUserInterface },
                { name: '–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', func: testPerformance },
                { name: 'API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è', func: testAPIIntegration },
                { name: '–ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å', func: testMobileResponsiveness },
                { name: '–§–æ—Ä–º—ã', func: testForms },
                { name: '–ù–∞–≤–∏–≥–∞—Ü–∏—è', func: testNavigation },
                { name: '–†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏', func: testDataHandling }
            ];
            
            totalTests = testSections.length;
            currentTest = 0;
            
            for (const section of testSections) {
                console.log(`\nüìã –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤: ${section.name}`);
                try {
                    await section.func();
                    currentTest++;
                } catch (error) {
                    console.error(`‚ùå –û—à–∏–±–∫–∞ –≤ —Ç–µ—Å—Ç–∞—Ö ${section.name}:`, error);
                    logTest(`–¢–µ—Å—Ç—ã ${section.name}`, false, '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: ' + error.message, 'failed', 'general');
                    currentTest++;
                }
            }
            
            showFinalResults();
        }
        
        async function runSpecificTest(testType) {
            clearResults();
            console.log(`üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤: ${testType}...\n`);
            
            const tests = {
                'auth': testAuthentication,
                'ui': testUserInterface,
                'performance': testPerformance
            };
            
            if (tests[testType]) {
                try {
                    await tests[testType]();
                } catch (error) {
                    console.error(`‚ùå –û—à–∏–±–∫–∞ –≤ —Ç–µ—Å—Ç–∞—Ö ${testType}:`, error);
                }
            }
            
            showFinalResults();
        }
        
        function clearResults() {
            document.getElementById('test-results').innerHTML = '';
            testResults = [];
            currentTest = 0;
            totalTests = 0;
            updateProgress();
        }
        
        function showFinalResults() {
            const passed = testResults.filter(r => r.passed).length;
            const failed = testResults.filter(r => !r.passed && r.type !== 'warning').length;
            const warnings = testResults.filter(r => r.type === 'warning').length;
            const total = testResults.length;
            const successRate = total > 0 ? Math.round((passed / total) * 100) : 0;
            
            const resultsDiv = document.getElementById('test-results');
            const summaryDiv = document.createElement('div');
            summaryDiv.className = 'test-section';
            summaryDiv.style.background = successRate === 100 ? '#d4edda' : successRate >= 80 ? '#fff3cd' : '#f8d7da';
            summaryDiv.style.borderColor = successRate === 100 ? '#28a745' : successRate >= 80 ? '#ffc107' : '#dc3545';
            summaryDiv.innerHTML = `
                <h3>üìä –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
                <div class="row">
                    <div class="col-md-3">
                        <div class="text-center">
                            <h4 class="text-success">${passed}</h4>
                            <p>–ü—Ä–æ–π–¥–µ–Ω–æ</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="text-center">
                            <h4 class="text-danger">${failed}</h4>
                            <p>–ü—Ä–æ–≤–∞–ª–µ–Ω–æ</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="text-center">
                            <h4 class="text-warning">${warnings}</h4>
                            <p>–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="text-center">
                            <h4 class="text-info">${successRate}%</h4>
                            <p>–£—Å–ø–µ—à–Ω–æ—Å—Ç—å</p>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-3">
                    ${successRate === 100 ? 
                        '<h5 class="text-success">üéâ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û!</h5>' : 
                        successRate >= 80 ? 
                        '<h5 class="text-warning">‚ö†Ô∏è –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ, –µ—Å—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è</h5>' : 
                        '<h5 class="text-danger">‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞</h5>'
                    }
                </div>
            `;
            
            resultsDiv.appendChild(summaryDiv);
            
            console.log(`\nüìä –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:`);
            console.log(`‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ: ${passed}/${total}`);
            console.log(`‚ùå –ü—Ä–æ–≤–∞–ª–µ–Ω–æ: ${failed}/${total}`);
            console.log(`‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è: ${warnings}/${total}`);
            console.log(`üìà –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: ${successRate}%`);
        }
        
        function assert(condition, message) {
            if (!condition) {
                throw new Error(message);
            }
        }
        
        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            console.log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            updateStats();
        });
    </script>
</body>
</html>
